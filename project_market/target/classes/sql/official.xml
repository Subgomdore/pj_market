<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="officialns">

<!-- 	<resultMap type="off" id="officialinsert">
	
			<result property="of_num" column="of_num" />
			<result property="of_name" column="of_name"/>
			<result property="of_subject" column="of_subject" />
			<result property="of_content" column="of_content" />
			<result property="of_readcount" column="of_readcount" />
			<result property="of_date" column="of_date" />
			
	</resultMap> -->
			
	<!-- 공지사항 글작성 -->
	
	<insert id="off_insert" parameterType="off">	
		insert into official values
	(official_seq.nextval,#{of_name},#{master_pw},#{of_subject}, #{of_content},
	0, sysdate)
	</insert>
	
	<!-- 공지사항 글갯수 -->
	<select id="off_count" resultType="int">
		select count(of_num) from official
	</select>
	

 	<!-- 공지사항 목록 -->
<select id="off_list" parameterType="int" resultType="off">
	<![CDATA[
	select * from (select rownum rnum, off.* from(
	select * from official order by no desc) off)
	where rnum >= ((#{page}-1) * 10 + 1) and rnum <= (#{page} * 10) 
	]]>
</select> 

	
		<!-- 공지사항 조회수 증가 -->
	<update id="off_hit" parameterType="int">
		update official set
		of_readcount=of_readcount+1
		where of_num=#{of_num}
	</update>
	
		<!-- 공지사항 내용보기 -->
	<select id="off_content" resultType="off" parameterType="int">
		select * from official where of_num=#{of_num}
	</select>
	
	<!-- 공지사항 수정 -->
	<update id="off_updatecontent" parameterType="off">
		update official set
		of_name=#{of_name},
		of_subject=#{of_subject},
		of_content=#{of_content},
		of_date=sysdate
		where of_num=#{of_num}
	</update>

	<!-- 공지사항 삭제 -->
	<delete id="off_delete" parameterType="int">
		delete from official where of_num=#{of_num}
	</delete>


</mapper>